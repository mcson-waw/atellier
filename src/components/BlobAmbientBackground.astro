---
/**
 * Blob Ambient Background Component
 * Floating organic shapes for ambient atmosphere
 */

interface Props {
  variant?: 'light' | 'dark' | 'mixed';
  intensity?: 'subtle' | 'medium' | 'strong';
  className?: string;
}

const {
  variant = 'light',
  intensity = 'subtle',
  className = '',
} = Astro.props;

const opacityMap = {
  subtle: { blob: 'opacity-[0.08]', glow: 'opacity-[0.05]' },
  medium: { blob: 'opacity-[0.12]', glow: 'opacity-[0.08]' },
  strong: { blob: 'opacity-[0.18]', glow: 'opacity-[0.12]' },
};

const colorMap = {
  light: {
    blob1: 'bg-forest-400',
    blob2: 'bg-moss',
    blob3: 'bg-forest-300',
    glow: 'bg-moss-light',
  },
  dark: {
    blob1: 'bg-forest-600',
    blob2: 'bg-forest-500',
    blob3: 'bg-moss-dark',
    glow: 'bg-forest-400',
  },
  mixed: {
    blob1: 'bg-forest-500',
    blob2: 'bg-moss',
    blob3: 'bg-bark',
    glow: 'bg-moss-light',
  },
};

const colors = colorMap[variant];
const opacity = opacityMap[intensity];
---

<div class:list={['absolute inset-0 overflow-hidden pointer-events-none', className]} aria-hidden="true">
  <!-- Large floating blob 1 -->
  <div
    class:list={[
      'absolute -top-1/4 -left-1/4 w-[300px] sm:w-[400px] lg:w-[600px] h-[300px] sm:h-[400px] lg:h-[600px] rounded-full blur-3xl',
      colors.blob1,
      opacity.blob,
      'blob-animate-1',
    ]}
  ></div>

  <!-- Large floating blob 2 -->
  <div
    class:list={[
      'absolute top-1/3 -right-1/4 w-[250px] sm:w-[350px] lg:w-[500px] h-[250px] sm:h-[350px] lg:h-[500px] rounded-full blur-3xl',
      colors.blob2,
      opacity.blob,
      'blob-animate-2',
    ]}
  ></div>

  <!-- Medium blob 3 -->
  <div
    class:list={[
      'absolute bottom-1/4 left-1/3 w-[200px] sm:w-[300px] lg:w-[400px] h-[200px] sm:h-[300px] lg:h-[400px] rounded-full blur-2xl',
      colors.blob3,
      opacity.blob,
      'mist-float',
    ]}
  ></div>

  <!-- Soft glow center -->
  <div
    class:list={[
      'absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[400px] sm:w-[600px] lg:w-[800px] h-[400px] sm:h-[600px] lg:h-[800px] rounded-full blur-3xl',
      colors.glow,
      opacity.glow,
      'glow-pulse',
    ]}
  ></div>

  <!-- Small accent blobs -->
  <div
    class:list={[
      'absolute top-1/4 right-1/4 w-24 sm:w-36 lg:w-48 h-24 sm:h-36 lg:h-48 rounded-full blur-xl',
      colors.blob1,
      opacity.blob,
      'leaf-drift',
    ]}
  ></div>

  <div
    class:list={[
      'absolute bottom-1/3 left-1/4 w-16 sm:w-24 lg:w-32 h-16 sm:h-24 lg:h-32 rounded-full blur-xl',
      colors.blob2,
      opacity.blob,
      'leaf-drift-delayed',
    ]}
  ></div>
</div>

<!-- Decorative SVG leaves (optional floating elements) -->
<div class="absolute inset-0 overflow-hidden pointer-events-none hidden sm:block" aria-hidden="true">
  <!-- Leaf 1 -->
  <svg
    class:list={[
      'absolute top-20 right-20 w-16 h-16 text-forest-400',
      opacity.blob,
      'leaf-drift',
    ]}
    viewBox="0 0 100 100"
    fill="currentColor"
  >
    <path d="M50 10 C70 30, 80 50, 70 80 C60 90, 40 90, 30 80 C20 50, 30 30, 50 10 Z" />
    <path d="M50 20 L50 75" stroke="currentColor" stroke-width="2" fill="none" opacity="0.5" />
  </svg>

  <!-- Leaf 2 -->
  <svg
    class:list={[
      'absolute bottom-32 left-16 w-12 h-12 text-moss rotate-45',
      opacity.blob,
      'leaf-drift-delayed',
    ]}
    viewBox="0 0 100 100"
    fill="currentColor"
  >
    <path d="M50 10 C70 30, 80 50, 70 80 C60 90, 40 90, 30 80 C20 50, 30 30, 50 10 Z" />
  </svg>

  <!-- Leaf 3 -->
  <svg
    class:list={[
      'absolute top-1/2 left-10 w-10 h-10 text-forest-300 -rotate-12',
      opacity.blob,
      'mist-float-reverse',
    ]}
    viewBox="0 0 100 100"
    fill="currentColor"
  >
    <path d="M50 10 C70 30, 80 50, 70 80 C60 90, 40 90, 30 80 C20 50, 30 30, 50 10 Z" />
  </svg>
</div>
