---
/**
 * Parallax Image Component
 * Image container with parallax scrolling effect
 */

interface Props {
  src: string;
  alt?: string;
  height?: string;
  speed?: number;
  overlayGradient?: string;
  className?: string;
  rounded?: boolean;
}

const {
  src,
  alt = '',
  height = '500px',
  speed = 0.5,
  overlayGradient,
  className = '',
  rounded = false,
} = Astro.props;

const defaultGradient = 'linear-gradient(to bottom, rgba(62, 94, 66, 0.1), rgba(62, 94, 66, 0.2))';
---

<div
  class:list={[
    'parallax-container relative overflow-hidden',
    rounded && 'rounded-2xl',
    className,
  ]}
  style={`height: ${height}`}
>
  <div
    class="absolute inset-0 w-full h-[130%] -top-[15%] parallax-element"
    data-parallax={speed}
  >
    <img
      src={src}
      alt={alt}
      class="w-full h-full object-cover"
      loading="lazy"
    />
  </div>

  {/* Overlay Gradient */}
  {overlayGradient !== 'none' && (
    <div
      class="absolute inset-0 pointer-events-none"
      style={`background: ${overlayGradient || defaultGradient}`}
    ></div>
  )}

  {/* Optional slot for overlay content */}
  <div class="absolute inset-0 z-10">
    <slot />
  </div>
</div>

<style>
  .parallax-container {
    will-change: transform;
  }

  .parallax-element {
    will-change: transform;
    transition: transform 0.1s linear;
  }
</style>
