---
/**
 * Process Section Component
 * Displays the journey/process steps
 */
import { getCollection } from 'astro:content';
import SectionWrapper from './SectionWrapper.astro';
import BlobAmbientBackground from './BlobAmbientBackground.astro';

const processContent = await getCollection('process');
const content = processContent[0];
const { Content } = await content.render();
---

<SectionWrapper id="process" background={content.data.background}>
  <BlobAmbientBackground variant="light" intensity="subtle" />
  
  <div class="relative z-10">
    <!-- Section Header -->
    <div class="text-center mb-16" data-animate="fade-up">
      <h2 class="text-display md:text-display-lg text-forest-900 mb-4">
        {content.data.title}
      </h2>
      {content.data.subtitle && (
        <p class="text-body-lg text-forest-600 max-w-2xl mx-auto">
          {content.data.subtitle}
        </p>
      )}
    </div>

    <!-- Process Steps -->
    {content.data.steps && (
      <div class="relative max-w-4xl mx-auto mb-20 px-2 sm:px-0">
        <!-- Connecting Line -->
        <div class="absolute left-8 lg:left-1/2 top-0 bottom-0 w-px bg-gradient-to-b from-forest-200 via-moss to-forest-200 lg:-translate-x-1/2 hidden lg:block"></div>
        
        <div class="space-y-8 sm:space-y-12" data-stagger="0.2">
          {content.data.steps.map((step, index) => (
            <div class={`flex items-start gap-4 sm:gap-8 ${index % 2 === 0 ? 'lg:flex-row' : 'lg:flex-row-reverse'}`}>
              <!-- Step Number -->
              <div class="flex-shrink-0 relative z-10">
                <div class="w-16 h-16 rounded-full bg-forest-600 text-mist flex items-center justify-center text-2xl font-display font-medium shadow-soft-lg">
                  {step.number}
                </div>
              </div>
              
              <!-- Step Content -->
              <div class={`flex-1 card p-6 sm:p-8 ${index % 2 === 0 ? 'lg:text-left' : 'lg:text-right'}`}>
                <h3 class="text-heading text-forest-800 mb-3">
                  {step.title}
                </h3>
                <p class="text-body text-forest-600">
                  {step.description}
                </p>
              </div>
            </div>
          ))}
        </div>
      </div>
    )}

    <!-- Extended Content -->
    <div class="max-w-3xl mx-auto" data-animate="fade-up">
      <div class="prose-nature">
        <Content />
      </div>
    </div>
  </div>
</SectionWrapper>
