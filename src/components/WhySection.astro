---
/**
 * Why Section Component
 * Displays pain points and introduction text
 */
import { getCollection } from 'astro:content';
import SectionWrapper from './SectionWrapper.astro';
import BlobAmbientBackground from './BlobAmbientBackground.astro';

const whyContent = await getCollection('why');
const content = whyContent[0];
const { Content } = await content.render();

const iconMap: Record<string, string> = {
  wave: `<svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M13 10V3L4 14h7v7l9-11h-7z"/></svg>`,
  unlink: `<svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"/></svg>`,
  battery: `<svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M4 8h14a2 2 0 012 2v4a2 2 0 01-2 2H4a2 2 0 01-2-2v-4a2 2 0 012-2zm16 3h2m-6-1v2"/></svg>`,
  body: `<svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/></svg>`,
};
---

<SectionWrapper id="why" background={content.data.background}>
  <BlobAmbientBackground variant="light" intensity="subtle" />
  
  <div class="relative z-10">
    <!-- Section Header -->
    <div class="text-center mb-16" data-animate="fade-up">
      <h2 class="text-display md:text-display-lg text-forest-900 mb-4">
        {content.data.title}
      </h2>
      {content.data.subtitle && (
        <p class="text-body-lg text-forest-600 max-w-2xl mx-auto">
          {content.data.subtitle}
        </p>
      )}
    </div>

    <!-- Pain Points Grid -->
    {content.data.painPoints && (
      <div class="grid sm:grid-cols-2 gap-4 sm:gap-6 lg:gap-8 mb-16" data-stagger="0.1">
        {content.data.painPoints.map((point) => (
          <div class="card group p-6 sm:p-8">
            <div class="flex items-start gap-4">
              <div class="flex-shrink-0 w-14 h-14 rounded-full bg-forest-100 flex items-center justify-center text-forest-600 group-hover:bg-forest-600 group-hover:text-mist transition-all duration-500">
                <Fragment set:html={iconMap[point.icon || 'wave']} />
              </div>
              <div>
                <h3 class="text-heading-sm text-forest-800 mb-2">
                  {point.title}
                </h3>
                <p class="text-body-sm text-forest-600">
                  {point.description}
                </p>
              </div>
            </div>
          </div>
        ))}
      </div>
    )}

    <!-- Main Content -->
    <div class="max-w-3xl mx-auto" data-animate="fade-up">
      <div class="prose-nature">
        <Content />
      </div>
    </div>
  </div>
</SectionWrapper>
